services:
  localstack:
    <<: *localstack

  ganache:
    <<: *ganache

  deployer-participant-au:
    <<: *deployer
    container_name: tec-deployer-participant-au
    env_file:
      - aws-credentials.env
      - deployer-participant-au.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  deployer-participant-gb:
    <<: *deployer
    container_name: tec-deployer-participant-gb
    env_file:
      - aws-credentials.env
      - deployer-participant-gb.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  channel-api-au:
    <<: *channel-api
    container_name: tec-channel-api-au
    env_file:
      - aws-credentials.env
      - channel-api-au.env
    ports:
      - '9090:9090'
    environment:
      REQUIRED_UNLOCK_FILES: AWS channel-node-participant-au

  channel-api-gb:
    <<: *channel-api
    container_name: tec-channel-api-gb
    env_file:
      - aws-credentials.env
      - channel-api-gb.env
    ports:
      - '9091:9091'
    environment:
      REQUIRED_UNLOCK_FILES: AWS channel-node-participant-gb

  contract-event-listener-au:
    <<: *contract-event-listener
    container_name: tec-contract-event-listener-au
    environment:
      YAML_CONFIG_FILE_VALUE: ${YAML_CONFIG_FILE_VALUE_AU}
      REQUIRED_UNLOCK_FILES: AWS channel-node-participant-au

  contract-event-listener-gb:
  contract-event-listener:
    <<: *contract-event-listener
    container_name: tec-contract-event-listener-gb
    environment:
      YAML_CONFIG_FILE_VALUE: ${YAML_CONFIG_FILE_VALUE_GB}
      REQUIRED_UNLOCK_FILES: AWS channel-node-participant-gb

  websub-hub-au:
    <<: *websub-hub
    container_name: tec-websub-hub-au
    env_file:
      - websub-hub.default.env
      - websub-hub-au.env
    container_name: tec-contract-event-listener
    command: container
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  callback-delivery-processor-au:
    <<: *websub-hub
    container_name: tec-callback-delivery-processor-au
    command: callback-delivery-processor
    env_file:
      - websub-hub.default.env
      - websub-hub-au.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  callback-spreader-processor-au:
    <<: *websub-hub
    container_name: tec-callback-spreader-processor-au
    command: callback-spreader-processor
    env_file:
      - websub-hub.default.env
      - websub-hub-au.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  new-messages-observer-processor-au:
    <<: *websub-hub
    container_name: tec-new-messages-observer-processor-au
    command: new-messages-observer-processor
    env_file:
      - websub-hub.default.env
      - websub-hub-au.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  websub-hub-gb:
    <<: *websub-hub
    container_name: tec-websub-hub-gb
    env_file:
      - websub-hub.default.env
      - websub-hub-gb.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  callback-delivery-processor-gb:
    <<: *websub-hub
    container_name: tec-callback-delivery-processor-gb
    command: callback-delivery-processor
    env_file:
      - websub-hub.default.env
      - websub-hub-gb.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  callback-spreader-processor-gb:
    <<: *websub-hub
    container_name: tec-callback-spreader-processor-gb
    command: callback-spreader-processor
    env_file:
      - websub-hub.default.env
      - websub-hub-gb.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS

  new-messages-observer-processor-gb:
    <<: *websub-hub
    container_name: tec-new-messages-observer-processor-gb
    command: new-messages-observer-processor
    env_file:
      - websub-hub.default.env
      - websub-hub-gb.env
    environment:
      REQUIRED_UNLOCK_FILES: AWS
